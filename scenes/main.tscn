[gd_scene load_steps=23 format=3 uid="uid://c6vxaopkyqc6i"]

[ext_resource type="Script" path="res://scenes/main.gd" id="1_1ogx0"]
[ext_resource type="PackedScene" uid="uid://bgbubl4fsvupu" path="res://scenes/map.tscn" id="1_ng5yi"]
[ext_resource type="PackedScene" uid="uid://cyliupk1rrn74" path="res://scenes/player.tscn" id="2_oappt"]
[ext_resource type="PackedScene" uid="uid://ci15i02n5bjak" path="res://scenes/spawner_bush.tscn" id="4_0x1ta"]
[ext_resource type="PackedScene" uid="uid://dl8wrgmp0q3vc" path="res://scenes/spawner_sewer.tscn" id="6_togh1"]
[ext_resource type="Script" path="res://scenes/BulletManager.gd" id="7_85jpq"]
[ext_resource type="PackedScene" uid="uid://5eregx8y4420" path="res://assets/destroyables/destroyable_crate.tscn" id="8_x1ocu"]
[ext_resource type="PackedScene" uid="uid://c4ixxt2df2oox" path="res://assets/maps/clutter/bush_vanity.tscn" id="9_mbn2c"]
[ext_resource type="Script" path="res://scenes/minimap.gd" id="10_hx26b"]
[ext_resource type="Shader" path="res://scenes/minimap.gdshader" id="10_xajyc"]
[ext_resource type="Texture2D" uid="uid://cv8lsbciq8whm" path="res://textures/controls.png" id="11_bcjic"]
[ext_resource type="Texture2D" uid="uid://c63pkn0vrrtdk" path="res://textures/minimap_bw.png" id="12_5n76g"]
[ext_resource type="Script" path="res://scenes/ScoreManager.gd" id="13_fpqvc"]
[ext_resource type="Texture2D" uid="uid://cjfwuq3atcmx8" path="res://textures/minimap_marker.png" id="13_posf4"]
[ext_resource type="PackedScene" uid="uid://b3mxvq14r1e0h" path="res://scenes/car.tscn" id="13_qxrvk"]
[ext_resource type="PackedScene" uid="uid://dkto8g4nanyhu" path="res://scenes/gascan.tscn" id="14_cu04f"]
[ext_resource type="PackedScene" uid="uid://cswl5fdgsweig" path="res://scenes/suitcase.tscn" id="15_ywsrf"]
[ext_resource type="AudioStream" uid="uid://72aeavxlk5rg" path="res://sfx/ingamethemesong.mp3" id="16_hmnpi"]

[sub_resource type="LabelSettings" id="LabelSettings_5b8d7"]
font_size = 50

[sub_resource type="ShaderMaterial" id="ShaderMaterial_orn37"]
shader = ExtResource("10_xajyc")
shader_parameter/radius = 1.0

[sub_resource type="ShaderMaterial" id="ShaderMaterial_e156b"]
shader = ExtResource("10_xajyc")
shader_parameter/radius = 1.0

[sub_resource type="LabelSettings" id="LabelSettings_7o2oy"]
font_size = 40
outline_color = Color(0, 0, 0, 1)
shadow_size = 20
shadow_color = Color(0, 0, 0, 0.360784)

[node name="Main" type="Node2D"]
script = ExtResource("1_1ogx0")

[node name="Map" parent="." instance=ExtResource("1_ng5yi")]
position = Vector2(6, 7)

[node name="SpawnersSewer" type="Node2D" parent="."]

[node name="spawner_sewer" parent="SpawnersSewer" instance=ExtResource("6_togh1")]
position = Vector2(602, 225)
rotation = 0.837138
scale = Vector2(0.08, 0.08)

[node name="spawner_sewer4" parent="SpawnersSewer" instance=ExtResource("6_togh1")]
position = Vector2(341, 1487)
rotation = 0.837138
scale = Vector2(0.08, 0.08)

[node name="spawner_sewer15" parent="SpawnersSewer" instance=ExtResource("6_togh1")]
position = Vector2(1124, -343)
rotation = 0.837138
scale = Vector2(0.08, 0.08)

[node name="spawner_sewer2" parent="SpawnersSewer" instance=ExtResource("6_togh1")]
position = Vector2(2806, -344)
rotation = 0.837138
scale = Vector2(0.08, 0.08)

[node name="spawner_sewer3" parent="SpawnersSewer" instance=ExtResource("6_togh1")]
position = Vector2(3480, 979)
rotation = 0.837138
scale = Vector2(0.08, 0.08)

[node name="ParticleManager" type="Node2D" parent="."]

[node name="PickupManager" type="Node2D" parent="."]

[node name="ObjectiveSpawnpoints" type="Node2D" parent="."]

[node name="Marker2D7" type="Marker2D" parent="ObjectiveSpawnpoints"]
position = Vector2(-160, 950)

[node name="Marker2D8" type="Marker2D" parent="ObjectiveSpawnpoints"]
position = Vector2(1399, 320)

[node name="Marker2D9" type="Marker2D" parent="ObjectiveSpawnpoints"]
position = Vector2(3748, -1741)

[node name="Marker2D10" type="Marker2D" parent="ObjectiveSpawnpoints"]
position = Vector2(4261, 395)

[node name="Marker2D21" type="Marker2D" parent="ObjectiveSpawnpoints"]
position = Vector2(3780, -862)

[node name="Marker2D22" type="Marker2D" parent="ObjectiveSpawnpoints"]
position = Vector2(3488, -849)

[node name="car" parent="." instance=ExtResource("13_qxrvk")]
position = Vector2(545, -694)
rotation = 1.13069

[node name="player" parent="." instance=ExtResource("2_oappt")]
unique_name_in_owner = true
position = Vector2(752, -496)

[node name="BulletManager" type="Node2D" parent="."]
script = ExtResource("7_85jpq")

[node name="Crates" type="Node2D" parent="."]

[node name="destroyable_crate" parent="Crates" instance=ExtResource("8_x1ocu")]
position = Vector2(426, 30)
rotation = 0.274924

[node name="destroyable_crate2" parent="Crates" instance=ExtResource("8_x1ocu")]
position = Vector2(432, -74)
rotation = -0.0427013

[node name="destroyable_crate3" parent="Crates" instance=ExtResource("8_x1ocu")]
position = Vector2(377, -22)
rotation = -0.0594537

[node name="destroyable_crate4" parent="Crates" instance=ExtResource("8_x1ocu")]
position = Vector2(683, 164)
rotation = 0.129054

[node name="destroyable_crate5" parent="Crates" instance=ExtResource("8_x1ocu")]
position = Vector2(687, 221)
rotation = 0.147791

[node name="destroyable_crate6" parent="Crates" instance=ExtResource("8_x1ocu")]
position = Vector2(740, 200)
rotation = -0.201935

[node name="destroyable_crate7" parent="Crates" instance=ExtResource("8_x1ocu")]
position = Vector2(641, 893)
rotation = -0.264536

[node name="destroyable_crate8" parent="Crates" instance=ExtResource("8_x1ocu")]
position = Vector2(585, 864)
rotation = 0.836466

[node name="destroyable_crate9" parent="Crates" instance=ExtResource("8_x1ocu")]
position = Vector2(715, 897)
rotation = 0.492682

[node name="destroyable_crate10" parent="Crates" instance=ExtResource("8_x1ocu")]
position = Vector2(1138, 1490)
rotation = -0.264536

[node name="destroyable_crate13" parent="Crates" instance=ExtResource("8_x1ocu")]
position = Vector2(1244, 1453)
rotation = 0.406386

[node name="destroyable_crate14" parent="Crates" instance=ExtResource("8_x1ocu")]
position = Vector2(964, -821)
rotation = 0.261824

[node name="destroyable_crate11" parent="Crates" instance=ExtResource("8_x1ocu")]
position = Vector2(901, -798)
rotation = 1.55588

[node name="destroyable_crate12" parent="Crates" instance=ExtResource("8_x1ocu")]
position = Vector2(832, -802)
rotation = 1.2121

[node name="SpawnersBush" type="Node2D" parent="."]

[node name="spawner_bush" parent="SpawnersBush" instance=ExtResource("4_0x1ta")]
z_index = 1
z_as_relative = false
position = Vector2(297, -269)
scale = Vector2(0.3, 0.3)

[node name="spawner_bush2" parent="SpawnersBush" instance=ExtResource("4_0x1ta")]
z_index = 1
z_as_relative = false
position = Vector2(1643, 1733)
scale = Vector2(0.3, 0.3)

[node name="spawner_bush3" parent="SpawnersBush" instance=ExtResource("4_0x1ta")]
z_index = 1
z_as_relative = false
position = Vector2(2323, 1297)
scale = Vector2(0.3, 0.3)

[node name="spawner_bush4" parent="SpawnersBush" instance=ExtResource("4_0x1ta")]
z_index = 1
z_as_relative = false
position = Vector2(2426, 180)
scale = Vector2(0.3, 0.3)

[node name="spawner_bush5" parent="SpawnersBush" instance=ExtResource("4_0x1ta")]
z_index = 1
z_as_relative = false
position = Vector2(1307, -2017)
scale = Vector2(0.3, 0.3)

[node name="spawner_bush6" parent="SpawnersBush" instance=ExtResource("4_0x1ta")]
z_index = 1
z_as_relative = false
position = Vector2(1151, -1201)
scale = Vector2(0.3, 0.3)

[node name="spawner_bush7" parent="SpawnersBush" instance=ExtResource("4_0x1ta")]
z_index = 1
z_as_relative = false
position = Vector2(3671, -1191)
scale = Vector2(0.3, 0.3)

[node name="Sprite2D" parent="SpawnersBush/spawner_bush7" index="0"]
visible = false

[node name="Area2D" parent="SpawnersBush/spawner_bush7" index="1"]
visible = false

[node name="spawner_bush11" parent="SpawnersBush" instance=ExtResource("4_0x1ta")]
z_index = 1
z_as_relative = false
position = Vector2(4401, 1158)
scale = Vector2(0.3, 0.3)

[node name="spawner_bush12" parent="SpawnersBush" instance=ExtResource("4_0x1ta")]
z_index = 1
z_as_relative = false
position = Vector2(4697, 709)
scale = Vector2(0.3, 0.3)

[node name="bushes" type="Node2D" parent="."]
z_index = 20
z_as_relative = false

[node name="bush_vanity" parent="bushes" instance=ExtResource("9_mbn2c")]
position = Vector2(1994, 371)

[node name="bush_vanity2" parent="bushes" instance=ExtResource("9_mbn2c")]
position = Vector2(2031, 556)
rotation = 0.950548

[node name="bush_vanity28" parent="bushes" instance=ExtResource("9_mbn2c")]
position = Vector2(1880, 512)
rotation = 0.950548

[node name="bush_vanity3" parent="bushes" instance=ExtResource("9_mbn2c")]
position = Vector2(2166, 435)
rotation = -0.336122

[node name="bush_vanity4" parent="bushes" instance=ExtResource("9_mbn2c")]
position = Vector2(1907, 694)
rotation = -0.328587

[node name="bush_vanity5" parent="bushes" instance=ExtResource("9_mbn2c")]
position = Vector2(1877, 869)
rotation = 0.62196

[node name="bush_vanity6" parent="bushes" instance=ExtResource("9_mbn2c")]
position = Vector2(2116, 808)
rotation = -0.664709

[node name="bush_vanity29" parent="bushes" instance=ExtResource("9_mbn2c")]
position = Vector2(1954, 1207)

[node name="bush_vanity30" parent="bushes" instance=ExtResource("9_mbn2c")]
position = Vector2(1991, 1392)
rotation = 0.950548

[node name="bush_vanity31" parent="bushes" instance=ExtResource("9_mbn2c")]
position = Vector2(1840, 1348)
rotation = 0.950548

[node name="bush_vanity32" parent="bushes" instance=ExtResource("9_mbn2c")]
position = Vector2(2577, 1258)
rotation = -0.336122

[node name="bush_vanity33" parent="bushes" instance=ExtResource("9_mbn2c")]
position = Vector2(1867, 1530)
rotation = -0.328587

[node name="bush_vanity34" parent="bushes" instance=ExtResource("9_mbn2c")]
position = Vector2(1837, 1705)
rotation = 0.62196

[node name="bush_vanity35" parent="bushes" instance=ExtResource("9_mbn2c")]
position = Vector2(2076, 1644)
rotation = -0.664709

[node name="bush_vanity36" parent="bushes" instance=ExtResource("9_mbn2c")]
position = Vector2(1458, 1447)

[node name="bush_vanity37" parent="bushes" instance=ExtResource("9_mbn2c")]
position = Vector2(1495, 1632)
rotation = 0.950548

[node name="bush_vanity38" parent="bushes" instance=ExtResource("9_mbn2c")]
position = Vector2(1344, 1588)
rotation = 0.950548

[node name="bush_vanity39" parent="bushes" instance=ExtResource("9_mbn2c")]
position = Vector2(1630, 1511)
rotation = -0.336122

[node name="bush_vanity40" parent="bushes" instance=ExtResource("9_mbn2c")]
position = Vector2(1371, 1770)
rotation = -0.328587

[node name="bush_vanity41" parent="bushes" instance=ExtResource("9_mbn2c")]
position = Vector2(1341, 1945)
rotation = 0.62196

[node name="bush_vanity42" parent="bushes" instance=ExtResource("9_mbn2c")]
position = Vector2(1508, 1872)
rotation = -0.664709

[node name="bush_vanity7" parent="bushes" instance=ExtResource("9_mbn2c")]
position = Vector2(2260, 647)
rotation = -0.328587

[node name="bush_vanity8" parent="bushes" instance=ExtResource("9_mbn2c")]
position = Vector2(2270, 798)
rotation = 0.62196

[node name="bush_vanity9" parent="bushes" instance=ExtResource("9_mbn2c")]
position = Vector2(2412, 724)
rotation = -0.664709

[node name="bush_vanity10" parent="bushes" instance=ExtResource("9_mbn2c")]
position = Vector2(2129, 946)
rotation = -0.328587

[node name="bush_vanity11" parent="bushes" instance=ExtResource("9_mbn2c")]
position = Vector2(2183, 1157)
rotation = 0.62196

[node name="bush_vanity12" parent="bushes" instance=ExtResource("9_mbn2c")]
position = Vector2(2301, 1010)
rotation = -0.664709

[node name="bush_vanity13" parent="bushes" instance=ExtResource("9_mbn2c")]
position = Vector2(2425, 879)
rotation = -0.328587

[node name="bush_vanity14" parent="bushes" instance=ExtResource("9_mbn2c")]
position = Vector2(2462, 1064)
rotation = 0.62196

[node name="bush_vanity15" parent="bushes" instance=ExtResource("9_mbn2c")]
position = Vector2(2597, 943)
rotation = -0.664709

[node name="bush_vanity16" parent="bushes" instance=ExtResource("9_mbn2c")]
position = Vector2(2563, 566)
rotation = -0.328587

[node name="bush_vanity17" parent="bushes" instance=ExtResource("9_mbn2c")]
position = Vector2(2560, 744)
rotation = 0.62196

[node name="bush_vanity18" parent="bushes" instance=ExtResource("9_mbn2c")]
position = Vector2(2695, 623)
rotation = -0.664709

[node name="bush_vanity19" parent="bushes" instance=ExtResource("9_mbn2c")]
position = Vector2(2287, 307)
rotation = -0.328587

[node name="bush_vanity20" parent="bushes" instance=ExtResource("9_mbn2c")]
position = Vector2(2381, 552)
rotation = 0.62196

[node name="bush_vanity21" parent="bushes" instance=ExtResource("9_mbn2c")]
position = Vector2(2523, 411)
rotation = -0.664709

[node name="bush_vanity22" parent="bushes" instance=ExtResource("9_mbn2c")]
position = Vector2(2086, 92)
rotation = -0.328587

[node name="bush_vanity23" parent="bushes" instance=ExtResource("9_mbn2c")]
position = Vector2(2123, 277)
rotation = 0.62196

[node name="bush_vanity24" parent="bushes" instance=ExtResource("9_mbn2c")]
position = Vector2(2258, 156)
rotation = -0.664709

[node name="bush_vanity25" parent="bushes" instance=ExtResource("9_mbn2c")]
position = Vector2(1824, 119)
rotation = -0.328587

[node name="bush_vanity26" parent="bushes" instance=ExtResource("9_mbn2c")]
position = Vector2(1861, 304)
rotation = 0.62196

[node name="bush_vanity27" parent="bushes" instance=ExtResource("9_mbn2c")]
position = Vector2(1962, 200)
rotation = -0.664709

[node name="ScoreManager" type="Node2D" parent="."]
script = ExtResource("13_fpqvc")

[node name="CanvasModulate" type="CanvasModulate" parent="."]
z_as_relative = false
color = Color(0.0431373, 0.0588235, 0.0941176, 1)

[node name="Pause" type="CanvasLayer" parent="."]

[node name="PauseMenu" type="Control" parent="Pause"]
process_mode = 3
visible = false
light_mask = 0
z_index = 10
z_as_relative = false
layout_mode = 3
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -20.0
offset_top = -20.0
offset_right = 20.0
offset_bottom = 20.0
grow_horizontal = 2
grow_vertical = 2

[node name="Label" type="Label" parent="Pause/PauseMenu"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -96.0
offset_top = -127.0
offset_right = 97.0
offset_bottom = -58.0
grow_horizontal = 2
grow_vertical = 2
text = "PAUSED"
label_settings = SubResource("LabelSettings_5b8d7")

[node name="ColorRect" type="ColorRect" parent="Pause/PauseMenu"]
custom_minimum_size = Vector2(400, 400)
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -200.0
offset_top = -200.0
offset_right = 200.0
offset_bottom = 200.0
grow_horizontal = 2
grow_vertical = 2
color = Color(0.286275, 0.286275, 0.286275, 0.666667)

[node name="UnpauseButton" type="Button" parent="Pause/PauseMenu"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -4.0
offset_top = 55.0
offset_right = 4.0
offset_bottom = 63.0
grow_horizontal = 2
grow_vertical = 2
text = "RESUME"

[node name="MenuButton" type="Button" parent="Pause/PauseMenu"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -4.0
offset_top = 108.0
offset_right = 4.0
offset_bottom = 116.0
grow_horizontal = 2
grow_vertical = 2
text = "MENU"

[node name="QuitButton" type="Button" parent="Pause/PauseMenu"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -23.0
offset_top = 151.0
offset_right = 24.0
offset_bottom = 182.0
grow_horizontal = 2
grow_vertical = 2
text = "QUIT
"

[node name="Controls" type="CanvasLayer" parent="."]

[node name="ControlsMenu" type="Control" parent="Controls"]
process_mode = 3
light_mask = 0
z_index = 10
z_as_relative = false
layout_mode = 3
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -20.0
offset_top = -20.0
offset_right = 20.0
offset_bottom = 20.0
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 4
size_flags_vertical = 4

[node name="ColorRect" type="ColorRect" parent="Controls/ControlsMenu"]
custom_minimum_size = Vector2(1200, 500)
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -606.0
offset_top = -184.0
offset_right = 594.0
offset_bottom = 316.0
grow_horizontal = 2
grow_vertical = 2
color = Color(0.286275, 0.286275, 0.286275, 0.666667)

[node name="Sprite2D" type="Sprite2D" parent="Controls/ControlsMenu"]
position = Vector2(22, 81)
rotation = -1.57079
texture = ExtResource("11_bcjic")

[node name="UnpauseButton" type="Button" parent="Controls/ControlsMenu"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -96.0
offset_top = 223.0
offset_right = -13.0
offset_bottom = 254.0
grow_horizontal = 2
grow_vertical = 2
text = "CONTINUE"

[node name="UI" type="CanvasLayer" parent="."]

[node name="SubViewportContainer" type="SubViewportContainer" parent="UI"]
material = SubResource("ShaderMaterial_orn37")
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -266.0
offset_top = 61.0
offset_right = -66.0
offset_bottom = 261.0
grow_horizontal = 0

[node name="SubViewport" type="SubViewport" parent="UI/SubViewportContainer"]
handle_input_locally = false
size = Vector2i(200, 200)
render_target_update_mode = 4
script = ExtResource("10_hx26b")

[node name="Sprite2D" type="Sprite2D" parent="UI/SubViewportContainer/SubViewport"]
modulate = Color(1, 1, 1, 0.741176)
material = SubResource("ShaderMaterial_e156b")
texture = ExtResource("12_5n76g")
offset = Vector2(85, 120)

[node name="Camera2D" type="Camera2D" parent="UI/SubViewportContainer/SubViewport"]
zoom = Vector2(1.5, 1.5)

[node name="MinimapMarker" type="Sprite2D" parent="UI/SubViewportContainer"]
position = Vector2(100, 100)
texture = ExtResource("13_posf4")

[node name="Marker2D" type="Marker2D" parent="UI/SubViewportContainer"]
position = Vector2(-691, 482)

[node name="gascan" parent="." instance=ExtResource("14_cu04f")]
position = Vector2(3071, -1662)

[node name="suitcase" parent="." instance=ExtResource("15_ywsrf")]
position = Vector2(1019, 1432)

[node name="BackgroundMusic" type="AudioStreamPlayer" parent="."]
stream = ExtResource("16_hmnpi")
bus = &"Music"

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="Label" type="Label" parent="CanvasLayer"]
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -288.5
offset_top = -100.0
offset_right = 288.5
offset_bottom = -44.9998
grow_horizontal = 2
grow_vertical = 0
text = "I need to find the suitcase, it is supposed to be in this town... 
and I need to find some gas for my car."
label_settings = SubResource("LabelSettings_7o2oy")
metadata/_edit_use_anchors_ = true

[connection signal="player_fired_bulled" from="player" to="BulletManager" method="_on_player_player_fired_bulled"]
[connection signal="pressed" from="Pause/PauseMenu/UnpauseButton" to="." method="_on_button_pressed"]
[connection signal="pressed" from="Pause/PauseMenu/MenuButton" to="." method="_on_menu_button_pressed"]
[connection signal="pressed" from="Pause/PauseMenu/QuitButton" to="." method="_on_quit_button_pressed"]
[connection signal="pressed" from="Controls/ControlsMenu/UnpauseButton" to="." method="_on_button_pressed"]

[editable path="SpawnersBush/spawner_bush7"]
